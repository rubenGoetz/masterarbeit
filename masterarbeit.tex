% Vorlage für eine Bachelorarbeit - 2012-2013 Timo Bingmann

% Dies ist nur eine Vorlage. Strikte Vorgaben wie die Bachelorarbeit auszusehen
% hat gibt es nicht. Darum können auch alle Teile angepasst werden.

\documentclass[12pt,a4paper,twoside]{scrartcl}

% Diese (und weitere) Eingabedateien sind in UTF-8
\usepackage[utf8]{inputenc}

% Verwende gute Type 1 Font: Latin Modern
\usepackage[T1]{fontenc}
\usepackage{lmodern}

% Sprache des Dokuments (für Silbentrennung und mehr)
\usepackage[german,english]{babel}

% Seitengröße - verwende fast die ganze A4 Seite
\usepackage[tmargin=22mm,bmargin=22mm,lmargin=20mm,rmargin=20mm]{geometry}

% Einrückung und Abstand zwischen Paragraphen
\setlength\parskip{\smallskipamount}
\setlength\parindent{0pt}

% Einige Standard-Mathematik Pakete
\usepackage{latexsym,amsmath,amssymb,mathtools,textcomp}

% Unterstützung für Sätze und Definitionen
\usepackage{amsthm}

\newtheorem{Satz}{Satz}[section]
\newtheorem{Definition}[Satz]{Definition}
\newtheorem{Lemma}[Satz]{Lemma}

\numberwithin{equation}{section}

% Deutsches Literaturverzeichnis
\usepackage{bibgerm}

% Unterstützung zum Einbinden von Graphiken
\usepackage{graphicx}

% Pakete die tabular und array verbessern
\usepackage{array,multirow}

% Kleiner enumerate und itemize Umgebungen
\usepackage{enumitem}

\setlist[enumerate]{topsep=0pt}
\setlist[itemize]{topsep=0pt}
\setlist[description]{font=\normalfont,topsep=0pt}

\setlist[enumerate,1]{label=(\roman*)}

% TikZ für Graphiken in LaTeX
\usepackage{tikz}
\usetikzlibrary{calc}

% Aktuelle Section und Untersection am Seitenkopf
\usepackage{fancyhdr}

\fancypagestyle{plain}{
  \fancyhead{}
  \fancyfoot{}
  \fancyfoot[LE,RO]{\normalsize\thepage}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}
}

\fancypagestyle{normal}{
  \setlength{\headheight}{20pt}
  \setlength\footskip{32pt}
  \fancyhead{}
  \fancyhead[LE]{\normalsize\textsc{\nouppercase{\leftmark}}}
  \fancyhead[RO]{\normalsize\textsc{\nouppercase{\rightmark}}}
  \fancyfoot{}
  \fancyfoot[LE,RO]{\normalsize\thepage}
  \renewcommand{\headrulewidth}{0.4pt}
  \renewcommand{\footrulewidth}{0pt}
}

% Hyperref für Hyperlink und Sprungtexte
\usepackage{xcolor,hyperref}

\hypersetup{
  pdftitle={Hier den Titel der Arbeit},
  pdfauthor={Hier den Author der Arbeit},
  pdfsubject={Stichworte, weiteres Stichwort},
  colorlinks=true,
  pdfborder={0 0 0},
  bookmarksopen=true,
  bookmarksopenlevel=1,
  bookmarksnumbered=true,
  linkcolor=blue!60!black,
  %linkcolor=black,
  citecolor=blue!60!black,
  urlcolor=blue!60!black,
  filecolor=green!60!black,
  pdfpagemode=UseNone,
  unicode=true,
}

% Paket zum Setzen von Algorithmen in Pseudocode mit kleinen Stilanpassungen
\usepackage[ruled,vlined,linesnumbered,norelsize]{algorithm2e}
\DontPrintSemicolon
\def\NlSty#1{\textnormal{\fontsize{8}{10}\selectfont{}#1}}
\SetKwSty{texttt}
\SetCommentSty{emph}
\def\listalgorithmcfname{Algorithmenverzeichnis}
\def\algorithmautorefname{Algorithmus}
\let\chapter=\section % repariert ein Problem mit algorithm2e

\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\pagestyle{empty} % keine Seitenzahlen

% Titelblatt der Arbeit
\begin{titlepage}

  \begin{center}\large

    \quad\includegraphics[height=17mm]{kit_logo_de.pdf} \hfill
    \includegraphics[height=20mm]{grouplogo-algo-blue.pdf}\quad\null

    \vfill

    Master Thesis
    \vspace*{2cm}

    {\huge Distributed String Sorting Algorithms \par}
    % Siehe auch oben die Felder pdftitle={}
    % mit \par am Ende stimmt der Zeilenabstand

    \vfill

    Matthias Schimek

    \vspace*{15mm}

    7 July 2019

    \vspace*{45mm}

    \begin{tabular}{rl}
      Betreuer: & Prof. Dr. Peter Sanders \\
      & Dipl. Inform. Zweiter Betreuer \\
    \end{tabular}
    
    \vspace*{10mm}

    Institut für Theoretische Informatik, Algorithmik \\
    Fakultät für Informatik \\
    Karlsruher Institut für Technologie

    % English:
    % Institute of Theoretical Informatics, Algorithmics \\
    % Department of Informatics \\
    % Karlsruhe Institute of Technology

    \vspace*{12mm}
  \end{center}

\end{titlepage}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\vspace*{0pt}\vfill

\hrule\medskip

Hiermit versichere ich, dass ich diese Arbeit selbständig verfasst und keine anderen, als die angegebenen Quellen und Hilfsmittel benutzt, die wörtlich oder inhaltlich übernommenen Stellen als solche kenntlich gemacht und die Satzung des Karlsruher Instituts für Technologie zur Sicherung guter wissenschaftlicher Praxis in der jeweils gültigen Fassung beachtet habe.

\bigskip

\noindent
Ort, den Datum

% Unterschrift (handgeschrieben)

\vspace*{5cm}

\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\vspace*{0pt}\vfill

\selectlanguage{english}
\begin{abstract}
\centerline{ Zusammenfassung}

Hier die deutsche Zusammenfassung

\end{abstract}

\vfill

\selectlanguage{english}
\begin{abstract}
\centerline{ Abstract}

\end{abstract}
\selectlanguage{english}

\vfill\vfill\vfill
\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\vspace*{0pt}\vfill

\section*{Danksagungen}


\vfill\vfill\vfill
\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\pagestyle{normal}
% markiere sections im Seitenkopf links und subsections rechts
\renewcommand\sectionmark[1]{\markboth{\thesection\quad\MakeUppercase{#1}}{\thesection\quad\MakeUppercase{#1}}}
\renewcommand\subsectionmark[1]{\markright{\thesubsection\quad\MakeUppercase{#1}}}

% Inhaltsverzeichnis
\tableofcontents

\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\listoffigures
\listoftables
\listofalgorithms

\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Introduction}

\subsection{Motivation}

??

\subsection{Contribution}

First paper/thesis about distributed string sorting (Except for\cite{fischer2019lightweight}). Write about difference to simple algorithm in this paper, i.e. LCP-Computation, Prefix-Compression, LCP-Losertree.

New prefix-doubling approach (only computes permutation) \cite{sanders2013communication}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Preliminaries And Related Work}

\subsection{Definitions}

Some convention about PEs, (Multi-)sets of strings to sort.

Distinguishing Prefixes and their sum $D$, Longest Common Prefixes and their sum $L$. Total number of characters of the stringset $N$ 

\subsection{Related Work}

``simple'' distributed string sorting in \cite{fischer2019lightweight}

General notes about shared memory distributed string sorting (specific sections in \cite{bingmann2018scalable})
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Description of Algos - Find better title}

\subsection{Distributed-Multiway-Mergesort}

Overview: Algorithm \ref{alg:distributed-merge-sort} showing the ``buildig block'' of the distributed-multiway-mergesort. A simple enumeration + short explanation/description of the different ``buildig blocks" might be better? More details in the following subsections.

\begin{algorithm}
	\caption{Distributed-Multiway-Mergesort : General Algorithm}\label{alg:distributed-merge-sort}
	\SetKwFunction{DFS}{DFS}
	\SetKwFunction{sortLocally}{sort}
	\SetKwFunction{choseSplitter}{chooseSplitters}
	\SetKwFunction{partition}{partition}
	\SetKwFunction{exchange}{exchange}
	\SetKwFunction{merge}{merge}`
	\KwIn{On each PE: a multiset $s$ of strings with $|s| = n / p$}
	\BlankLine
	\sortLocally{$s$} \tcp*{sort locally}
	$splitters \leftarrow \choseSplitter{s}$ \tcp*{choose $p-1$ splitters}
	$s' \leftarrow \partition{s, splitters}$ \tcp*{partition $s$ into $p$ multisets $s'$}
	$s'' \leftarrow \exchange(s')$ \; 
	$s''' \leftarrow \merge(s'')$
	
	\KwOut{A sorted multiset of strings $s'''$ and its lcp values}
	
\end{algorithm}

Write something about runtime 

Write something about communication volume (dominated by the string-all-to-all exchange) should be in $\mathcal{O}(N)$


\subsubsection{String-Based Sampling}

splitter lengths are bounded by lcp-median.

\subsubsection{Character-Based Sampling}

splitter lengths are bounded by lcp-median.

\subsubsection{String All-To-All-Exchange}

No prefix compression.

Prefix compression using the precalculated lcp values. (Also mention ncessary decompression)

\subsubsection{Merging}

Merging using lcp-losertree. 

Short proof why we do not need to decompress the strings for the losertree?

\subsubsection{Decompression}


\subsection{Prefix-Doubling-Algorithm}

Overview: Algorithm \ref{alg:PrefixDoubling} showing the ``buildig blocks" of the prefix-doubling approach. Same as above: just a simple enumeration with a short description?

This algorithms only determines the \textcolor{red}{sorting permutation (better expression ?)}. 

Runtime more or less same as above + bloomfilter.

Important: Its communication volume is in $\mathcal{O}(D)$.
\begin{algorithm}
	\caption{Prefix-Doubling Approach: General Algorithm}\label{alg:PrefixDoubling}
	\SetKwFunction{DFS}{DFS}
	\SetKwFunction{sortLocally}{sort}
	\SetKwFunction{bloomfilter}{bloomfilter}
	\SetKwFunction{choseSplitter}{chooseSplitters}
	\SetKwFunction{partition}{partition}
	\SetKwFunction{exchange}{exchange}
	\SetKwFunction{merge}{merge}
	\KwIn{On each PE: a multiset $s$ of strings with $|s| = n / p$}
	\BlankLine
	\sortLocally{$s$} \tcp*{sort locally}
	$dPrefixes \leftarrow \bloomfilter(s)$ \tcp*{determine distinguishing prefix of each string}
	$splitters \leftarrow \choseSplitter{s}$ \tcp*{choose $p-1$ splitters}
	$s' \leftarrow \partition{s, splitters}$ \tcp*{partition $s$ into $p$ multisets $s'$}
	$s'' \leftarrow \exchange(s', dPrefix)$ \; 
	$s''' \leftarrow \merge(s'')$
	
	\KwOut{A sorted multiset of strings $s'''$ and its lcp values}
	
\end{algorithm}

\subsubsection{Prefix-Doubling Approach using Bloomfilter}

Describe the algorithm in more detail. What do I need to mention, where can/must I cite \cite{sanders2013communication} or/and \cite{schlag2013distributed}?

How much shall I write about golomb encoding? 

\Lemma[DistinguishinPrefixLength] {
	Let $d$ be the length of the distinguishing prefix of a string $s$ in a multiset $S$. By $d'$ we denote the value found with the prefix-doubling approach. Then, $d \le d' \le 2 \cdot d$ holds.
	\textcolor{red}{Assumption: No collision in hashfunction -> otherwise a probabilistic value}
}
\Lemma[Communication volume] {
	The communication volume of the algorithm is in $\mathcal{O}(D)$.
	\textcolor{red}{Assumption: No collision in hashfunction -> otherwise a probabilistic value}
}
\proof{
	
	A string $s$ participates in the prefix-doubling-algorithm until the depth is greater than or equal to its distinguishing prefix. In each step of the algorithm the depth is doubled. Hence, $s$ drops out of the process after at most $\lceil{\log(d)} \rceil$ rounds (starting with depth = 2). Therefore, at most $\lceil{\log(d)} \rceil$ hash values are sent for string $s$ in the whole process. Since $\lceil{\log(d)} \rceil \le d$, the total number of hash values sent sums up to at most $D$. It follows that the communication volume of the prefix-doubling algorithm is in $\mathcal{O}(D)$.
}

\subsubsection{All-To-All-Exchange using Prefix Compression and Distinguishing Prefix Length}

Clearly communication volume is in $\mathcal{O}(D')$. D' is the sum of the distinguishing prefix lengths determined by prefix-doubling. As shown above $D' \le 2 D$. 
Using Prefix Compression we can even do better. Should be something like $\mathcal{O}(D - L)$. Maybe I should avoid Landau-Notation since 
\[
n + L \le D \le 2L + n
\] (see \cite{bingmann2018scalable}).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Implementation Details}

\subsection{Sending Strings/Lcp values using MPI}

Different encoding layouts. One call for string and lcp values: Interleaved, sequential/ One call for strings and lcps values each.

\subsection{What else can I mention here?}
	

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Experimental Evaluation}
\subsection{Data}
\subsubsection{DToNGenerator}
Write something about the DToNGenerator.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Conclusion}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%






\clearpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\bibliographystyle{gerplain}
\bibliography{literatur}

\end{document}
